package main

import (
	standardLog "log"

	"github.com/arman1371/vulnerability-scanner-api/handlers"
	"github.com/arman1371/vulnerability-scanner-api/log"
	"github.com/arman1371/vulnerability-scanner-api/trivyhelper"
	"github.com/gin-gonic/gin"
)

func main() {
	if err := log.InitLogger(); err != nil {
		standardLog.Fatalf("Error in initializing logger. %v\n", err)
	}

	if err := trivyhelper.InitTrivyHelper(); err != nil {
		log.FatalF("Error in initializing the trivy helper. %v", err)
	}

	router := gin.Default()
	router.POST("scan", handlers.Scan)

	_ = router.Run(":8081")
}
